# 预览与保存

* 预览： 将配置面板中的修改临时渲染到页面图表中，用于验证效果。
* 保存： 将配置面板中的修改真正地保存到数据库中。

## 操作入口

![clipboard-image-1761479218](https://static-docs.nocobase.com/clipboard-image-1761479218.png)

- 图形化配置模式的所有修改，默认会自动执行预览生效。
- SQL模式、Custom模式修改后，可以点击右侧的 预览 按钮执行预览生效。
- 在整个配置面板底部，提供统一的“预览”的按钮。

## 预览行为
- 临时把配置展示到页面，但是不写入数据库。刷新页面或取消操作后，预览结果不保留。
- 内置防抖：短时间内触发多次刷新，仅执行最后一次，避免频繁请求。
- 再次点击“预览”会覆盖上一次预览结果。

## 错误提示
- 查询错误或校验失败：在“查看数据”区域显示错误信息。
- 图表配置错误（Basic 映射缺失、Custom JS 抛错）：在图表区域或控制台展示错误，保持页面可操作。
- 先在“查看数据”确认列名与数据类型，再进行字段映射或编写 Custom 代码，能有效减少错误。

## 保存与取消
- 保存：将当前面板的改动写入区块配置，并立即对页面生效。
- 取消：撤销当前面板未保存的改动，恢复到上次保存状态。
- 保存范围：
  - 数据查询：Builder 的查询参数；SQL 模式下同时保存 SQL 文本。
  - 图表选项：Basic 的类型与字段映射、属性；Custom 的 JS 文本。
  - 交互事件：事件的 JS 文本与绑定逻辑。
- 保存后，区块对所有访问者生效（取决于页面权限设置）。

## 推荐操作路径
- 配置数据查询 → 运行查询 → 查询数据 确认列名与类型 → 配置图表选项 映射核心字段 → 预览验证 → 保存生效。