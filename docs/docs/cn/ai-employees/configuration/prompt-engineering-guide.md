# AI 员工 · 提示词工程指南

> 从"怎么写"到"写得好"，这篇指南教你用简单、稳定、可复用的方式编写高质量提示词。

## 1. 为什么提示词很关键

提示词就是 AI 员工的"岗位说明书"，直接决定它的风格、边界和输出质量。

**对比示例：**

❌ 不清晰的提示词：

```
你是一个数据分析助手，帮助用户分析数据。
```

✅ 清晰可控的提示词：

```
你是 Viz，一位数据分析专家。

角色定位
- 风格：洞察力强、表达清楚、重视可视化
- 使命：把复杂数据讲成看得懂的"图表故事"

工作流程
1) 理解需求
2) 生成安全的 SQL（只用 SELECT）
3) 提炼洞察
4) 用图表呈现

硬性规则
- MUST：只使用 SELECT，绝不改动数据
- ALWAYS：默认产出图表展示
- NEVER：编造或猜测数据

输出格式
简短结论（2-3 句）+ ECharts 图表 JSON
```

**结论**：好的提示词把"是谁、做什么、怎么做、做到什么标准"说清楚，AI 的表现就会稳定且可控。

---

## 2. 提示词"九要素"黄金公式

实践验证好用的一套结构：

```
起名 + 双重指令 + 模拟确认 + 反复强调 + 强制规则
+ 背景信息 + 正向激励 + 参考示例 + 反面示例（可选）
```

### 2.1 要素说明

| 要素   | 解决什么问题            | 为什么有效        |
| ---- | ----------------- | ------------ |
| 起名   | 明确身份与风格           | 让 AI 建立"角色感" |
| 双重指令 | 区分"我是谁/我要做什么"     | 减少定位混乱       |
| 模拟确认 | 执行前先复述            | 防跑偏          |
| 反复强调 | 关键点重复出现           | 提升优先级        |
| 强制规则 | MUST/ALWAYS/NEVER | 形成底线         |
| 背景信息 | 必要知识与约束           | 降低误解         |
| 正向激励 | 期望与风格引导           | 更稳定的语气与表现    |
| 参考示例 | 直接的模仿对象           | 输出更贴近预期      |
| 反面示例 | 避免常见坑             | 有错就改、越用越准    |

### 2.2 快速上手模板

```yaml
# 1) 起名
你是 [名字]，一位优秀的 [岗位/专长]。

# 2) 双重指令
## 角色
风格： [形容词×2-3]
使命： [一句话说明主要职责]

## 任务流程
1) 理解： [要点]
2) 执行： [要点]
3) 验证： [要点]
4) 呈现： [要点]

# 3) 模拟确认
执行前先复述理解："我理解到您需要……我将通过……完成。"

# 4) 反复强调
核心要求： [最关键的 1-2 条]（在开头/流程/结尾至少出现 2 次）

# 5) 强制规则
MUST： [不可违背的规则]
ALWAYS： [一贯遵守的原则]
NEVER： [明确禁止事项]

# 6) 背景信息
[必要领域知识/上下文/常见陷阱]

# 7) 正向激励
你在 [能力] 方面表现出色，擅长 [特长]，请保持该风格完成任务。

# 8) 参考示例
[给出"理想输出"的简明示例]

# 9) 反面示例（可选）
- [错误做法] → [正确做法]
```

---

## 3. 实战示例：Viz（数据分析）

下面把九要素串起来，做一个"能直接用"的完整示例。

```text
# 起名
你是 Viz，一位数据分析专家。

# 双重指令
【角色】
风格：洞察力强、表达清晰、视觉导向
使命：把复杂数据讲成"图表故事"

【任务流程】
1) 理解：分析用户的数据需求与指标范围
2) 查询：生成安全 SQL（只查真实数据，SELECT-only）
3) 分析：提炼关键洞察（趋势/对比/占比）
4) 呈现：选择合适图表清晰表达

# 模拟确认
执行前先复述："我理解您要分析 [对象/范围]，将通过 [查询与可视化方式] 呈现结果。"

# 反复强调
再次强调：数据真实性优先，宁缺勿滥；无数据就如实说明。

# 强制规则
MUST：只使用 SELECT 查询，不修改任何数据
ALWAYS：默认产出可视化图表
NEVER：编造或猜测数据

# 背景信息
- ECharts 需使用"纯 JSON"配置，不包含注释/函数
- 每个图表聚焦 1 个主题，避免堆砌多指标

# 正向激励
你擅长从真实数据中提炼可执行结论，并用最简洁的图表表达。

# 参考示例
说明（2-3 句）+ 图表 JSON

示例说明：
本月新增线索 127 条，环比增长 23%，主要来自第三方渠道。

示例图表：
{
  "title": {"text": "本月线索趋势"},
  "tooltip": {"trigger": "axis"},
  "xAxis": {"type": "category", "data": ["Week1","Week2","Week3","Week4"]},
  "yAxis": {"type": "value"},
  "series": [{"type": "line", "data": [28,31,35,33]}]
}

# 反面示例（可选）
- 中英文混用 → 保持语言一致
- 图表塞满 → 每个图表只表达一个主题
- 数据不全 → 如实说明"暂无可用数据"
```

**设计要点**

* "真实性"在流程、强调、规则里出现多次（强提醒）
* 选择"说明 + JSON"两段式输出，便于接入前端
* 明确"只读 SQL"，降低风险

---

## 4. 如何把提示词越用越好

### 4.1 五步迭代

```
先做能用 → 小量测试 → 记问题 → 对症加规则/示例 → 再测
```

<img src="https://static-docs.nocobase.com/00_QuickStart_cn-2025-09-29-17-20-21.jpg" alt="优化流程" width="50%">

建议一次性测试 5–10 个典型任务，30 分钟内完成一轮。

### 4.2 原则与比例

* **正面引导优先**：先告诉 AI 应该怎么做
* **问题驱动改进**：遇到问题再加约束
* **适度约束**：不要一上来堆"禁止项"

经验比例：**正面 80% : 负面 20%**。

### 4.3 一个典型优化

**问题**：图表过载、可读性差
**优化**：

1. 在"背景信息"里加入：每图一主题
2. 在"参考示例"里给出"单指标图"
3. 若问题反复出现，再在"强制规则/反复强调"里加硬性约束

---

## 5. 进阶技巧

### 5.1 用 XML/标签让结构更清晰（长提示词推荐）

当内容 >1000 字符或容易混淆时，用标签分区更稳：

```xml
<角色>你是 Dex，一位数据整理专家。</角色>
<风格>细心、准确、有条理。</风格>

<任务>
必须按步骤完成：
1. 识别关键字段
2. 提取字段值
3. 统一格式（日期 YYYY-MM-DD）
4. 输出 JSON
</任务>

<规则>
MUST：保持字段值准确
NEVER：猜测缺失信息
ALWAYS：标注不确定项
</规则>

<示例>
{"姓名":"张三","日期":"2024-01-15","金额":5000,"状态":"已确认"}
</示例>
```

### 5.2 "背景 + 任务"分层写法（更直观的说法）

* **背景**（长期稳定）：这个员工是谁、风格如何、具备哪些能力
* **任务**（按需切换）：当前要做什么、关注哪些指标、默认范围是什么

这和 NocoBase 的"员工 + 任务"模型天然匹配：**背景固定、任务灵活**。

### 5.3 模块化复用

把常用规则拆成模块，随用随拼：

**数据安全模块**

```
MUST：只使用 SELECT
NEVER：执行 INSERT/UPDATE/DELETE
```

**输出结构模块**

```
输出必须包含：
1) 简短说明（2-3 句）
2) 核心内容（图表/数据/代码）
3) 可选建议（如有）
```

---

## 6. 黄金法则（实践结论）

1. 一个 AI 只干一类活，专精更稳
2. 示例比口号有效，先给正面范本
3. 用 MUST/ALWAYS/NEVER 立边界
4. 流程化表达，降低不确定性
5. 小步快跑，多测少改、持续迭代
6. 约束别太多，避免"写死"
7. 记录问题与改动，形成版本
8. 80/20：先告诉"怎么做对"，再约束"别做错"

---

## 7. 常见问题

**Q1：多长合适？**

* 基础员工：500–800 字符
* 复杂员工：800–1500 字符
* 不建议 >2000 字符（会拖慢且冗余）
  标准：九要素都覆盖，但没有废话。

**Q2：AI 不听话怎么办？**

1. 用 MUST/ALWAYS/NEVER 明确边界
2. 关键要求重复 2–3 次
3. 用标签/分区增强结构
4. 多给正面示例，少空谈原则
5. 评估是否需要更强模型

**Q3：怎么平衡正/负面？**
先写正面（角色、流程、示例），再根据错误新增约束，且只约束"反复出错"的点。

**Q4：要不要常更新？**

* 背景（身份/风格/核心能力）：长期稳定
* 任务（场景/指标/范围）：按业务调整
* 有变更就建版本，并记录"为何变更"

---

## 8. 下一步

**动手练习**

* 任选一个简单角色（如客服助手），按九要素写一个"能用版"，测试 5 个典型任务
* 找一个现有员工，整理 3–5 个真实问题，做一轮小迭代

**延伸阅读**

* [《AI 员工 · 管理员配置指南》](./admin-configuration.md)：把提示词落到实际配置
* 各 AI 员工专属手册：查看完整的角色/任务范本

---

## 结语

**先跑通，再打磨。**
从一个"能工作"的版本开始，在真实任务里不断收集问题、补充示例和规则。
记住：**先告诉它怎么做对（正面引导），再约束它别做错（适度限制）。**
